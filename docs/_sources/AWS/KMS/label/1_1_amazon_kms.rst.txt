======================================
KMS
======================================

------------------------
1) 개요
------------------------

KMS 키를 사용하여 데이터를 암호화 및 복호화, 전자서명과 인증을 할 수 있다.

AWS KMS 외부에서 사용할 수 있는 데이터 키를 생성할 수 있다.

고객 마스터 키(CMK) 용어가 -> AWS KMS key 로 변경됨

KMS 키에는 데이터를 암호화하고 복호화하는데 사용하는 키 구성 요소 외에도 키 ID, 생성 날짜, 설명 및 키 상태와 같은 메타데이터가 포함한다.

- **AWS KMS 유형**

  - 고객 관리형 키
    : 고객 관리형 키를 명확하게 식별하려면 DescribeKey 필드 값에 지정한다.

  - AWS 관리형 키
    : AWS KMS와 통합된 AWS 서비스가 고객의 계정에서 고객 대신 생성, 관리 및 사용하는 KMS 키이다.
    일부 AWS 서비스는 AWS 관리형 키만 지원한다.

    계정에서 AWS 관리형 키를 확인하고 키 정책을 확인하며, AWS CloudTrail 로그에서 사용을 감시할 수 있다.
    하지만 이러한 KMS 키를 관리하거나, 교체하거나 이들의 키 정책을 변경할 수 없다. 암호화 작업에서 직접 AWS 관리형 키를
    사용할 수 없다.

    aws/service-name 형식의 이름으로 식별할 수 있음

  - AWS 키
    : AWS 키는 AWS 서비스가 여러 AWS 계정에서 사용하기 위해 소유하고 관리하는 KMS 키 모음이다.

- **데이터 키**

  다운로드 할 수 없는 KMS 키와 달리 데이터 키는 AWS KMS 외부 사용용으로 반환된다.

  외부에서 OpenSSL 또는 AWS Encryption SDK 같은 암호화 라이브러리를 이용해서 데이터 키를 사용할 수 있다.

  데이터 키 생성

  GenerateDataKey 작업 호출 => 즉시 사용할 수 있는 데이터 키, 암호화된 데이터 키

  GenerateDataKeyWithoutPlaintext 작업 호출 => 암호화된 데이터 키만 반환